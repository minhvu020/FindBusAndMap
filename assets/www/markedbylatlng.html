<html>
<head>
	<title>Marked</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />

	<!-- Wikilookup references -->
	<link rel="stylesheet" type="text/css" href="css/index.css" />
	<link rel="stylesheet" type="text/css" href="css/googlemap.css" />
	<script type="text/javascript" src="js/index.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places&language=vi"></script>

<script>
	var lat, lon;
	var map; 
	
    function initialize() {
	   	// Lấy dữ liệu kinh, vĩ độ, khóa kiếm --------------------------- \\
		var z = location.toString().indexOf('#');
		var mySearch = location.toString().substr(z+1);
		var x = mySearch.toString().indexOf('@');
		var y = mySearch.toString().indexOf('$');
		lat = mySearch.toString().substr(0, x);
		lon = mySearch.toString().substr(x + 1, y - x - 1);
		// --------------------------------------------------------------- \\
		
        map = new google.maps.Map(document.getElementById('map_canvas'), {
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: new google.maps.LatLng(lat, lon),
          zoom: 15
        });

         var iconImage = new google.maps.MarkerImage("icon/current.png",
							  new google.maps.Size(20, 34),
							  new google.maps.Point(0,0),
							  new google.maps.Point(9, 34));
                    
         var currentmarker = new google.maps.Marker({map: map, position:new google.maps.LatLng(lat, lon), icon:iconImage});
        
         var currentinfoWindow = new google.maps.InfoWindow();
         
         currentinfoWindow.setContent('<b>'  +  "Your location!"   +  '</b>');            			
		 currentinfoWindow.open(map, currentmarker);
                 
          google.maps.event.addListener(currentmarker, 'click', function() {
	            		currentinfoWindow.setContent('<b>'  +  "Your location!"   +  '</b>');            			
		            	currentinfoWindow.open(map, currentmarker);		
		            	           
	          	});      
	          	
	      google.maps.event.addListener(map, 'click', function() {
			   				 currentinfoWindow.close();
			  			});     	
	          	
     }
     
     google.maps.event.addDomListener(window, 'load', initialize);
     
</script>
</head>
<body>
<div id="map_canvas"></div>
</body>
</html>